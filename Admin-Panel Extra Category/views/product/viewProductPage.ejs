<%- include('../header') %>

<main class="main-content position-relative border-radius-lg">
  <nav
    class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl"
    id="navbarBlur"
    data-scroll="false"
  >
    <div class="container-fluid py-1 px-3">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb bg-transparent mb-0 pb-0 pt-1 px-0 me-sm-6 me-5">
          <li class="breadcrumb-item text-sm">
            <a class="opacity-5 text-white" href="/">Dashboard</a>
          </li>
          <li
            class="breadcrumb-item text-sm text-white active"
            aria-current="page"
          >
            Products
          </li>
        </ol>
        <h6 class="font-weight-bolder text-white mb-0">View Products</h6>
      </nav>
    </div>
  </nav>

  <div class="container-fluid py-4">
    <div class="row">
      <div class="col-12">
        <div class="card mb-4">
          <div class="card-header pb-0">
            <h4>Products List</h4>
          </div>
          <div class="card-body px-0 pt-0 pb-2">
            <div class="table-responsive p-0">
              <table class="table align-items-center mb-0">
                <thead>
                  <tr>
                    <th
                      class="text-uppercase text-center text-secondary text-xxs font-weight-bolder opacity-7"
                    >
                      Image
                    </th>
                    <th
                      class="text-uppercase text-center text-secondary text-xxs font-weight-bolder opacity-7"
                    >
                      Category
                    </th>
                    <th
                      class="text-uppercase text-center text-secondary text-xxs font-weight-bolder opacity-7"
                    >
                      Sub Category
                    </th>
                    <th
                      class="text-uppercase text-center text-secondary text-xxs font-weight-bolder opacity-7"
                    >
                      Extra Category
                    </th>
                    <th
                      class="text-uppercase text-center text-secondary text-xxs font-weight-bolder opacity-7"
                    >
                      Product Name
                    </th>
                    <th
                      class="text-uppercase text-center text-secondary text-xxs font-weight-bolder opacity-7"
                    >
                      Description
                    </th>
                    <th
                      class="text-uppercase text-center text-secondary text-xxs font-weight-bolder opacity-7"
                    >
                      Price
                    </th>
                    <th
                      class="text-secondary text-center text-xxs font-weight-bolder opacity-7"
                    >
                      Actions
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <% if (productData.length > 0) { %> <%
                  productData.forEach(product => { %>
                  <tr>
                    <td class="text-center">
                      <% if(product.product_image) { %>
                      <img
                        src="../<%= product.product_image %>"
                        alt="<%= product.product_name %>"
                        style="width: auto; height: 80px"
                        class="img-fluid rounded shadow"
                      />
                      <% } else { %>
                      <span class="text-muted">No Image</span>
                      <% } %>
                    </td>
                    <td class="text-center">
                      <p class="text-xs font-weight-bold mb-0">
                        <%= product.category_id?.c_title || 'N/A' %>
                      </p>
                    </td>
                    <td class="text-center">
                      <p class="text-xs font-weight-bold mb-0">
                        <%= product.subCategory_id?.subcategory_title || 'N/A'
                        %>
                      </p>
                    </td>
                    <td class="text-center">
                      <p class="text-xs font-weight-bold mb-0">
                        <%= product.extraCategory_id?.extraCategory_title ||
                        'N/A' %>
                      </p>
                    </td>
                    <td class="text-center">
                      <p class="text-xs font-weight-bold mb-0">
                        <%= product.product_name %>
                      </p>
                    </td>
                    <td class="text-center">
                      <p class="text-xs font-weight-bold mb-0">
                        <%= product.product_description %>
                      </p>
                    </td>
                    <td class="text-center">
                      <p class="text-xs font-weight-bold mb-0">
                        â‚¹<%= product.product_price %>
                      </p>
                    </td>
                    <td class="align-middle text-center">
                      <a
                        href="/product/editProductPage/<%= product._id %>"
                        class="text-secondary font-weight-bold text-xs"
                        >Edit</a
                      >
                      |
                      <a
                        href="/product/deleteProduct/<%= product._id %>"
                        class="text-danger font-weight-bold text-xs"
                        onClick="return confirm('Are you sure you want to delete this product?')"
                        >Delete</a
                      >
                    </td>
                  </tr>
                  <% }); %> <% } else { %>
                  <tr>
                    <td colspan="8" class="text-center text-muted p-4">
                      No Products Found
                    </td>
                  </tr>
                  <% } %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <%- include('../footer') %>
      </div>
    </div>
  </div>
</main>
